<section>
  <!-- fragment-scale-diagnostics.html -->
    <!-- Diagnostics -->
      
<div class="collapse collapse-arrow bg-white mb-6 border-2 border-dotted border-gray-400">
        <input type="checkbox" class="peer" />
        <div class="collapse-title font-bold text-lg flex items-center gap-2">
          üõ†Ô∏è Diagnostics
          <!-- Fragment Loader Diagnostic -->
          <div class="mt-4 p-3 bg-gray-50 border border-gray-200 rounded">
            <div class="font-semibold text-gray-800 mb-2">Fragment Loader Diagnostic</div>
            <div id="fragment-loader-status" class="text-xs text-gray-700"></div>
            <button id="run-fragment-diagnostic" class="mt-2 px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600">Run Diagnostic</button>
          </div>
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              const statusDiv = document.getElementById('fragment-loader-status');
              const btn = document.getElementById('run-fragment-diagnostic');
              function checkFragments() {
                let fragments = [
                  {id: 'header-container', name: 'Header'},
                  {id: 'footer-container', name: 'Footer'},
                  {id: 'instrument-select', name: 'Instrument Select'},
                  {id: 'root-note', name: 'Root Note'},
                  {id: 'vf', name: 'VexFlow Container'}
                ];
                let results = fragments.map(f => {
                  let el = document.getElementById(f.id);
                  return `<li><b>${f.name}</b>: <span style="color:${el ? 'green' : 'red'}">${el ? 'Loaded' : 'Missing'}</span></li>`;
                }).join('');
                statusDiv.innerHTML = `<ul class='pl-4'>${results}</ul>`;
              }
              if (btn) {
                btn.onclick = checkFragments;
              }
              checkFragments();
            });
          </script>
        </div>
        <div class="collapse-content">
        <div class="space-y-2">
          <label class="flex items-center gap-2">
            <input type="checkbox" id="diagnostic-mode" onchange="toggleDiagnosticLink()" />
            Enable Diagnostic Mode
          </label>
          <div class="text-xs text-gray-600">
            ‚Üí Reveals note mapping, MATCH overlays, and trace logs
          </div>
          <div id="diagnostic-about-link" class="mt-3 pt-2 border-t border-gray-200" style="display: none;">
            <a
              href="about.html"
              class="text-sm text-blue-600 hover:text-blue-800 underline"
            >
              üìÑ About This Application
            </a>
          </div>
        </div>
      </div>
        </div>
      </div>
    </div>

</section>
