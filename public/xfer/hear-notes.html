<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hear Notes</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/meyda/dist/web/meyda.min.js"></script>
</head>
<body class="p-10">
  <h2 class="text-xl font-bold mb-4">Meyda: Listen & Detect Pitch</h2>
  <button class="btn btn-accent" onclick="startListening()">Start Listening</button>
  <p id="note" class="mt-4 text-lg"></p>

  <script>
    let audioContext = new AudioContext();
    let analyzer;

    async function startListening() {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
      const source = audioContext.createMediaStreamSource(stream);
      analyzer = Meyda.createMeydaAnalyzer({
        audioContext,
        source,
        bufferSize: 512,
        featureExtractors: ["pitch"],
        callback: features => {
          const freq = features.pitch;
          document.getElementById("note").textContent = `Pitch: ${freq.toFixed(2)} Hz`;
        }
      });
      analyzer.start();
    }
  </script>
</body>
</html>
